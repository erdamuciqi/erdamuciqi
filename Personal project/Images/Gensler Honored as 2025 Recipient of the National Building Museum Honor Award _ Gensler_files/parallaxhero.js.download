define(["jquery"],(function(a){return{start:function(){a(".hero-parallax-wrapper").each((function(){var e=a(this);e.data("parallaxHero")||(e.data("parallaxHero",!0),function(e){function r(a,e,r){var n,o,i,t,l;return function(){i=this,o=arguments,t=new Date;var s=function(){var p=new Date-t;p<e?n=setTimeout(s,e-p):(n=null,r||(l=a.apply(i,o)))},p=r&&!n;return n||(n=setTimeout(s,e)),p&&(l=a.apply(i,o)),l}}var n=window,o=a(n),i=n.innerWidth,t=e.hasClass("parallax-hero-img")?e:e.find(".parallax-hero-img"),l=e.find(".parallax-hero-video-inner"),s=["imgMobile","imgTablet","imgDesktop"],p=-1,c=(n.isMobile||n.isTablet)&&n.screen&&n.screen.height&&n.screen.height>n.innerHeight,h=!1,f=t.hasClass("hero-parallax-topbar"),u=r((function(){h=!1}),100),g=function(a){var r=t.data(s[a]);r&&function(a,e){var r=new Image;r.onload=e,r.onerror=e,r.src=a}(r,(function(){p===a&&(t.css({backgroundImage:'url("'+r+'")'}),e.removeClass("hero-loading"))})),p=a},d=function(){var a=n.scrollY;if(a<e.height()){var r=Math.round(i<768?a-a/4:-a/4)+"px";t.css("background-position-y",r),l.css("bottom",i<768?"-"+r:r)}h&&requestAnimationFrame(d)},x=function(){var a=e.offset(),r=0;if((i=n.innerWidth)>1024?r=2:i>678&&(r=1),r!=p&&g(r),a&&a.top){var l=Math.max((c?n.screen.height:n.innerHeight)-a.top,400);e.height(l)}if(f)if(i<=678){var s=e.offset().top;t.css({position:"relative",top:-s+"px",paddingTop:s+"px"})}else t.css({position:"",top:"",paddingTop:""});o.trigger("scroll.parallaxHero")};e.hasClass("hero-parallax-leftbox")&&o.on("scroll.parallaxHero",(function(){e.size()&&(n.scrollY>=.7*e.height()?e.find(".parallax-leftbox").width("100%"):e.find(".parallax-leftbox").width("50%"))})),t.size()&&o.on("scroll.parallaxHero",(function(){h||(h=!0,requestAnimationFrame(d)),u()})),o.on("resize.parallaxHero tabchange.parallaxHero",r(x,100)).trigger("resize"),o.on("tabcollapse tabexpand",x)}(e))}))}}}));